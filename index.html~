<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta charset="utf-8" />
<title>TUG 2016 demo</title>
<meta name="author" content="Christian Gagné" />
<link href="pres.css" rel="stylesheet" type="text/css" media="all" />
</head>
<body>
  <h1>Triumph of the Macro Hero, on Cataclysm’s Eve wins three Formats of Typographic Virtue</h1>
  <p class="article-info">Christian Gagné <br /> August 2016</p>
  <p>The following is a small demo of the use of Emacs Org-mode coupled with a TeX engine to produce Web content in different formats. A preliminary version of the present page was shown at the <a href="http://tug.org/">TeX Users Group</a> 2016 meeting in Toronto.</p>
  <p>Below is a comparison of the same text content first in HTML, then SVG inside an <code>img</code> element with text converted to paths, and finally directly-included SVG with proper SVG Text. Display may vary depending on the browser, even in recent versions. The text enunciates a principle that the author of the present page holds dearly.</p>
  <section class="showcase">
	<p>With highly structured notations, the verbosity might actually be embraced if the material is narrative, with both long stretches of linear sequences and arbitrary depth in some places. The depth is often the result of aesthetic goals that require many levels of tag nesting, which might indeed create a Welter of Delimiters.</p>
	<img src="welter.svg" alt="Herein the Welter explained." />
	<svg height='66.3269pt' version='1.1' viewBox='-72 -72.2572 387.25 66.3269' width='387.25pt' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
<defs>
<font horiz-adv-x='0' id='md-chr8y'>
<font-face ascent='963' descent='-236' font-family='md-chr8y' units-per-em='1000'/>
<glyph d='M39 -169C140 -158 208 -80 208 6C208 70 178 106 128 106C94 106 69 84 69 51C69 33 74 19 85 7H149C149 3 149 -1 149 -4C149 -77 112 -122 39 -136V-169Z' glyph-name='comma' horiz-adv-x='278' unicode=',' vert-adv-y='278'/>
<glyph d='M139 118C104 118 75 90 75 54S104 -9 139 -9S202 19 202 54C202 90 174 118 139 118Z' glyph-name='period' horiz-adv-x='278' unicode='.' vert-adv-y='278'/>
<glyph d='M280 671H33V631L90 625L107 611V60L90 46L33 41V0H280C380 0 456 11 524 62C606 124 649 217 649 336C649 546 517 671 280 671ZM197 625H276C459 625 548 531 548 336C548 142 459 46 276 46H197V625Z' glyph-name='D' horiz-adv-x='693' unicode='D' vert-adv-y='693'/>
<glyph d='M16 671V517H71L85 610L99 625H253V60L235 46L168 41V0H429V41L362 46L344 60V625H498L512 610L526 517H581V671H16Z' glyph-name='T' horiz-adv-x='597' unicode='T' vert-adv-y='597'/>
<glyph d='M231 0H298L464 547L633 0H701L860 617L927 631V671H720V631L787 619L798 605L677 136L513 671H443L282 147L153 609L161 623L224 631V671H0V631L63 617L231 0Z' glyph-name='W' horiz-adv-x='928' unicode='W' vert-adv-y='928'/>
<glyph d='M334 58L347 0H488V36L435 41L417 57V347C417 448 373 491 268 491C142 491 66 439 66 378C66 354 74 347 97 347H166V431C193 442 217 447 242 447C314 447 334 414 334 335V303C134 255 42 225 42 121C42 46 91 -7 170 -7C218 -7 271 15 334 58ZM334 92C284 63 243 47 210 47C160 47 130 80 130 129C130 202 193 229 334 268V92Z' glyph-name='a' horiz-adv-x='507' unicode='a' vert-adv-y='507'/>
<glyph d='M131 736L8 700V669H86V0H214C405 0 504 91 504 263C504 399 424 491 306 491C262 491 217 479 169 456V736H131ZM169 46V422C202 432 232 438 257 438C357 438 414 369 414 244C414 106 354 45 224 45C219 45 200 45 169 46Z' glyph-name='b' horiz-adv-x='539' unicode='b' vert-adv-y='539'/>
<glyph d='M425 42V94C383 66 342 52 298 52C194 52 128 125 128 248C128 374 189 451 275 451C292 451 308 446 323 437V355C338 345 353 340 368 340C402 340 424 361 424 393C424 451 370 491 274 491C134 491 37 390 37 241C37 93 126 -7 262 -7C316 -7 370 10 425 42Z' glyph-name='c' horiz-adv-x='446' unicode='c' vert-adv-y='446'/>
<glyph d='M383 669V481C352 488 322 492 294 492C142 492 36 385 36 225C36 85 120 -9 229 -9C284 -9 332 11 383 52V0H531V36L483 41L466 57V736H428L306 700V669H383ZM383 89C346 66 310 54 274 54C184 54 124 125 124 242C124 367 194 448 295 448C319 448 349 442 383 432V89Z' glyph-name='d' horiz-adv-x='565' unicode='d' vert-adv-y='565'/>
<glyph d='M448 106C391 68 341 48 291 48C190 48 123 124 123 252C123 255 123 259 123 263H447C448 274 448 284 448 294C448 417 377 491 268 491C134 491 37 388 37 237C37 90 128 -9 260 -9C323 -9 388 11 448 51V106ZM359 305H128C134 390 191 446 255 446C322 446 359 402 359 321C359 316 359 310 359 305Z' glyph-name='e' horiz-adv-x='491' unicode='e' vert-adv-y='491'/>
<glyph d='M29 0H262V36L200 41L183 57V421H323V468H184V541C184 625 206 677 249 697L340 637C366 644 381 663 381 687C381 719 349 744 303 744C185 744 100 645 100 479C100 476 100 472 100 468L36 453V421H100V57L82 41L29 36V0Z' glyph-name='f' horiz-adv-x='321' unicode='f' vert-adv-y='321'/>
<glyph d='M369 463C331 482 294 491 256 491C138 491 62 423 62 326C62 251 109 192 186 175C154 137 138 106 138 80C138 64 142 49 148 35C80 23 40 -25 40 -89C40 -169 106 -218 221 -218C297 -218 366 -195 419 -152C458 -120 479 -77 479 -40C479 34 427 65 309 83L213 98C212 109 211 117 211 122C211 138 215 153 222 167C228 167 234 167 239 167C355 167 430 234 430 323C430 358 421 387 402 416H512V463H369ZM246 452C304 452 344 405 344 329C344 254 304 206 246 206S148 254 148 329C148 406 188 452 246 452ZM206 30L303 12C373 -1 405 -12 405 -66C405 -122 345 -172 256 -172C174 -172 120 -126 120 -68C120 -24 151 13 206 30Z' glyph-name='g' horiz-adv-x='523' unicode='g' vert-adv-y='523'/>
<glyph d='M141 736L19 700V669H96V57L79 41L25 36V0H244V36L197 41L179 57V392C222 414 259 425 291 425C365 425 392 395 392 322V57L375 41L328 36V0H546V36L493 41L475 57V339C475 439 428 491 341 491C298 491 246 468 179 431V736H141Z' glyph-name='h' horiz-adv-x='564' unicode='h' vert-adv-y='564'/>
<glyph d='M154 708C122 708 96 683 96 650C96 618 122 593 154 593S212 618 212 650S186 708 154 708ZM150 486L35 450V419H105V57L88 41L35 36V0H260V36L206 41L188 57V486H150Z' glyph-name='i' horiz-adv-x='280' unicode='i' vert-adv-y='280'/>
<glyph d='M28 0H262V36L205 41L187 57V736H149L27 700V669H104V57L87 41L28 36V0Z' glyph-name='l' horiz-adv-x='282' unicode='l' vert-adv-y='282'/>
<glyph d='M454 424C431 468 393 491 344 491C302 491 250 470 184 431V486H146L30 450V419H101V57L84 41L30 36V0H249V36L201 41L184 57V392C228 414 265 425 298 425C358 425 386 392 386 322V57L369 41L321 36V0H534V36L487 41L469 57V392C512 413 550 425 582 425C644 425 672 392 672 322V57L654 41L607 36V0H825V36L772 41L755 57V339C755 438 705 491 626 491C586 491 529 468 454 424Z' glyph-name='m' horiz-adv-x='843' unicode='m' vert-adv-y='843'/>
<glyph d='M30 0H249V36L201 41L184 57V392C227 414 264 425 296 425C370 425 397 395 397 322V57L380 41L332 36V0H551V36L497 41L480 57V339C480 439 432 491 345 491C302 491 251 468 184 431V486H146L30 450V419H101V57L84 41L30 36V0Z' glyph-name='n' horiz-adv-x='568' unicode='n' vert-adv-y='568'/>
<glyph d='M269 491C134 491 37 390 37 241C37 93 135 -9 269 -9S502 93 502 241S404 491 269 491ZM269 448C350 448 408 370 408 241C408 111 350 34 269 34C189 34 131 112 131 241C131 371 188 448 269 448Z' glyph-name='o' horiz-adv-x='539' unicode='o' vert-adv-y='539'/>
<glyph d='M23 -218H258V-182L194 -177L177 -161V6C214 0 245 -3 270 -3C418 -3 516 99 516 257C516 397 434 491 324 491C277 491 230 471 177 431V486H139L23 450V419H94V-161L77 -177L23 -182V-218ZM177 58V394C215 416 248 428 282 428C369 428 428 359 428 244C428 121 360 42 262 42C238 42 210 47 177 58Z' glyph-name='p' horiz-adv-x='551' unicode='p' vert-adv-y='551'/>
<glyph d='M459 475C406 486 358 492 316 492C144 492 37 390 37 230C37 88 117 -3 234 -3C276 -3 321 9 372 33V-161L355 -178L292 -182V-218H526V-182L473 -178L455 -161V402C455 412 457 436 459 475ZM372 438V65C332 55 302 50 279 50C185 50 127 119 127 243C127 373 193 449 296 449C317 449 342 445 372 438Z' glyph-name='q' horiz-adv-x='531' unicode='q' vert-adv-y='531'/>
<glyph d='M30 0H271V36L201 41L184 57V343C225 391 260 416 293 416C314 416 331 408 344 392H376V478C355 487 336 491 316 491C308 491 299 491 291 489C255 460 219 428 184 392V486H146L30 450V419H101V57L83 41L30 36V0Z' glyph-name='r' horiz-adv-x='382' unicode='r' vert-adv-y='382'/>
<glyph d='M344 469C310 484 271 491 227 491C113 491 50 439 50 351C50 284 94 252 179 214C245 184 281 166 281 114C281 67 245 33 187 33C158 33 130 41 102 57L90 142H42V12C77 -1 121 -9 172 -9C290 -9 359 48 359 141C359 178 345 208 321 227C288 254 250 268 215 285C159 312 130 333 130 376C130 421 160 448 213 448C237 448 261 441 287 427L295 356H344V469Z' glyph-name='s' horiz-adv-x='400' unicode='s' vert-adv-y='400'/>
<glyph d='M88 421V98C88 27 109 -3 192 -3C231 -3 276 4 323 19V56C300 51 277 48 254 48C184 48 171 81 171 157V421H323V468H171V574H134L91 481L25 452V421H88Z' glyph-name='t' horiz-adv-x='334' unicode='t' vert-adv-y='334'/>
<glyph d='M142 491L26 454V423H97V143C97 43 145 -10 231 -10C280 -10 333 13 393 56V0H541V36L494 41L476 57V491H438L322 454V423H393V84C352 64 314 54 277 54C210 54 180 88 180 160V491H142Z' glyph-name='u' horiz-adv-x='569' unicode='u' vert-adv-y='569'/>
<glyph d='M-5 481V444L56 438L217 0H273L448 436L507 444V481H330V444L384 440L392 424L264 97L147 424L159 440L212 444V481H-5Z' glyph-name='v' horiz-adv-x='494' unicode='v' vert-adv-y='494'/>
<glyph d='M-2 481V444L59 438L192 0H254L389 379L510 0H572L715 436L771 444V481H594V444L648 440L656 424L554 99L436 481H375L241 99L150 424L162 440L215 444V481H-2Z' glyph-name='w' horiz-adv-x='771' unicode='w' vert-adv-y='771'/>
<glyph d='M-1 481V444L60 438L228 4C203 -67 174 -117 147 -146L51 -108C34 -124 25 -142 25 -162C25 -195 52 -218 94 -218C159 -218 207 -163 254 -50L454 436L512 444V481H334V444L388 440L396 424L271 113L151 424L163 440L216 444V481H-1Z' glyph-name='y' horiz-adv-x='495' unicode='y' vert-adv-y='495'/>
</font>
</defs>
<style type='text/css'><![CDATA[
text.f1 {font-family:md-chr8y;font-size:11.4342px}
]]>
</style>
<g id='page1'>
<text class='f1' x='-72' y='-63.7136'>W<tspan x='-61.6072'>ith</tspan>
<tspan x='-43.5386'>highly</tspan>
<tspan x='-7.97567'>structured</tspan>
<tspan x='47.7571'>notations,</tspan>
<tspan x='102.41'>the</tspan>
<tspan x='122.891'>verbosity</tspan>
<tspan x='172.701'>might</tspan>
<tspan x='206.389'>actually</tspan>
<tspan x='250.115'>be</tspan>
<tspan x='266.492'>embraced</tspan>
<tspan x='-72' y='-49.2678'>if</tspan>
<tspan x='-61.0725'>the</tspan>
<tspan x='-41.1348'>material</tspan>
<tspan x='4.38104'>is</tspan>
<tspan x='16.2119'>narrative,</tspan>
<tspan x='68.7673'>with</tspan>
<tspan x='95.1081'>both</tspan>
<tspan x='121.758'>long</tspan>
<tspan x='147.675'>stretches</tspan>
<tspan x='195.661'>of</tspan>
<tspan x='209.55'>linear</tspan>
<tspan x='242.305'>sequences</tspan>
<tspan x='296.523'>and</tspan>
<tspan x='-72' y='-34.8219'>arbitrary</tspan>
<tspan x='-25.3953'>depth</tspan>
<tspan x='6.31071'>in</tspan>
<tspan x='19.0703'>some</tspan>
<tspan x='48.1236'>places.</tspan>
<tspan x='86.1233'>The</tspan>
<tspan x='108.076'>depth</tspan>
<tspan x='139.782'>is</tspan>
<tspan x='150.621'>often</tspan>
<tspan x='179.445'>the</tspan>
<tspan x='198.391'>result</tspan>
<tspan x='229.559'>of</tspan>
<tspan x='242.456'>aesthetic</tspan>
<tspan x='289.507'>goals</tspan>
<tspan x='-72' y='-20.3761'>that</tspan>
<tspan x='-49.0296'>require</tspan>
<tspan x='-10.2'>many</tspan>
<tspan x='20.4771'>levels</tspan>
<tspan x='51.4628'>of</tspan>
<tspan x='64.3826'>tag</tspan>
<tspan x='83.0652'>nesting,</tspan>
<tspan x='125.531'>which</tspan>
<tspan x='158.632'>might</tspan>
<tspan x='190.807'>indeed</tspan>
<tspan x='227.739'>create</tspan>
<tspan x='261.137'>a</tspan>
<tspan x='270.021'>W</tspan>
<tspan x='279.679'>elter</tspan>
<tspan x='305.405'>of</tspan>
<tspan x='-72' y='-5.93028'>Delimiters.</tspan>
</text>
</g>
</svg>
  </section>
  <p>When the intended fonts are present, the last two instances have much better layout since the content was typeset by a TeX engine in DVI mode and subsequently converted by the wonderful tool <kbd>dvisvgm</kbd>. The intended fonts, in this case, are Charis SIL or Bitstream Charter: the metrics in the DVI were calculated with Charter chosen as the main body font. Many font families with similar metrics will give pleasing results. Such sophisticated typesetting affords both economy and ergonomics, and that is why I consider it worthy of the effort for Web content production – and also because this allows one to typeset for the Web the kind of complex content that TeX excels at, be it book-quality tables, expansive bibliographies or multi-language text in several directions. Perhaps someday the Web browsers will include magical unicorn TeX-equivalent layout engines, but that day has not yet arrived.</p>
  <p>With the third instance, we get the best of both worlds: the SVG Text can be made as semantic and as accessible as one desires by adding the appropriate markup (e.g. <a href="https://en.wikipedia.org/wiki/WAI-ARIA">ARIA</a>). It can also be selected, copied and pasted into applications that recognize the content type as text.</p>
  <p>Now, the following is an example of how <a href="http://orgmode.org/">Org-mode</a> syntax can be used to produce such reusable content, with flexible structure notations that export to multiple formats (in this case primarily HTML5 and LaTeX).</p>
  <section class="showcase">
	<p class="written-code"><code>#+begin_section</code><code>#+attr_html: :id about-blocks :class mt_sectitle</code><code>#+begin_header</code>
How block-delimited lines become paragraphs,
which are at the syntactic level
of <i class="defined-name">mt_concept</i><kbd>(</kbd><em>elements</em><kbd>)</kbd> in Org parlance
<code>#+end_header</code>
The parsing rules dictate that, because Org
is very much a <i class="defined-name">mt_emphasis</i><kbd>(</kbd><em>line-based</em><kbd>)</kbd> format
(in its surface guise), paragraphs are created
inside the special blocks as expected.

As for the lexical macros, they are expanded
at the very beginning of the export process.
<code>#+end_section</code></p>
  </section>
  <p>The above contains Org special blocks, which create so-called ‘greater elements’ and ‘elements’ (roughly equivalent to <a href="http://spec.commonmark.org/0.26/#blocks-and-inlines">CommonMark’s container blocks and leaf blocks</a>), plus some lexical macros, which are Org ‘objects’ (inlines in Markdown/CommonMark). The <code>mt_</code> prefix means ‘multi-target’, since the constructs will be substituted for the appropriate HTML or TeX markup depending on the selected export format. Note that the macro names are here rendered in a different font so as to denote that they are <em>user-defined names</em> in the Org source.</p>
  <p>The previous example exports to the following HTML, whose rendition depends on the present page’s associated CSS:</p>
<section class="showcase">
<header id="about-blocks" class="mt_sectitle">
<p>
How block-delimited lines become paragraphs,
which are at the syntactic level
of <i class="mt_concept">elements</i> in Org parlance
</p>
</header>

<p>
The parsing rules dictate that, because Org
is very much a <em>line-based</em> format
(in its surface guise), paragraphs are created
inside the special blocks as expected.
</p>

<p>
As for the lexical macros, they are expanded
at the very beginning of the export process.
</p>
</section>
<p>Here is the same Org fragment exported to LaTeX, with the LaTeX being handled differently from the first example above: here it is typeset to PDF and the PDF is converted to SVG with the <i>Poppler</i> conversion tools. The Poppler tools are widely available today: they are part of Inkscape and can also be used with the Unix-like command-line utility <kbd>pdf2svg</kbd>, which means that nowadays they can even be used on Windows if one installs the <i>Windows Subsystem for Linux</i>. The rendition here is a minimalistic example of what can be done with the pdfTeX engine; the body text is typeset in the rather exclusive <a href="https://en.wikipedia.org/wiki/Concrete_Roman">Concrete Roman</a> family, which is very suitable for the Web:</p>
<section class="showcase">
  <img src="blockdemo.svg" alt="[An example of text typeset in Latin Modern and Concrete Roman]"></img>
</section>
  <p>Finally, the following is one small step in my long quest to find the most satisfying notation for structuring text. Here, the delimiters are inspired by the substitution operator of equational logics, based on the famous <em>Leibniz rule</em>. Interestingly, this parenthesis-then-square-bracket arrangement is the reverse of Markdown’s link syntax, which might be a good thing or not depending on who you ask. This syntax is just an idea that I am floating around, I certainly don’t want to use an actual equational logic system to write documents. Someday, the most beautiful and useful syntax will emerge from such essays.</p>
  <section class="showcase">
	<p class="written-code">
<code>(</code>
<code>(</code>
How block-delimited lines become paragraphs,
which are at the syntactic level
of <kbd>(</kbd><em>elements</em><kbd>)[</kbd><i class="defined-name">ps_concept</i><kbd>]</kbd> in Org parlance
<code>)</code><kbd>[</kbd><i class="defined-name">ps_header</i><kbd>]</kbd>

The parsing rules dictate that, because Org
is very much a <kbd>(</kbd><em>line-based</em><kbd>)[</kbd><i class="defined-name">ps_emphasis</i><kbd>]</kbd> format
(in its surface guise), paragraphs are created
inside the special blocks as expected.

As for the lexical macros, they are expanded
at the very beginning of the export process.
<code>)</code><kbd>[</kbd><i class="defined-name">ps_section</i><kbd>]</kbd>
	</p>
  </section>
</body>
</html>
